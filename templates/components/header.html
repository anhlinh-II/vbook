<header class="fixed top-0 left-0 w-full bg-white shadow-md z-10">
    <div class="container mx-auto flex justify-between items-center py-4 px-20">
        <!-- Logo -->
        <h1 class="text-3xl font-bold text-sky-700" style="font-family: 'Monoton', cursive;">VBook</h1>

        <input class="px-4 py-2 w-72 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-sky-500 shadow-sm"
               placeholder="Tìm kiếm sách..."
               type="text">


        <!-- Navigation -->
        <nav>
            <ul class="flex space-x-6 font-bold items-center">
                <li class="hover:bg-gray-200 rounded-md px-3 py-2">
                    <a class="text-gray-700 hover:text-sky-600 block" href="{{ url_for('home') }}">Trang chủ</a>
                </li>
                <li class="hover:bg-gray-200 rounded-md px-3 py-2">
                    <a class="text-gray-700 hover:text-sky-600 block" href="{{ url_for('favorites') }}">Danh sách ưa thích</a>
                </li>
                <!-- Thể loại (Dropdown) -->
                <li class="relative group hover:bg-gray-200 rounded-md px-3 py-2">
                    <a class="text-gray-700 hover:text-sky-600 block" href="#">Thể loại</a>
                    <ul class="absolute left-0 hidden group-hover:block bg-white border rounded-md shadow-md w-40" id="category-dropdown">
                        <!-- Danh sách thể loại sẽ được thêm động bằng JavaScript -->
                    </ul>
                </li>
                <li class="hover:bg-gray-200 rounded-md px-3 py-2">
                    <a class="text-gray-700 hover:text-sky-600 block" href="{{ url_for('reading') }}">Đang đọc</a>
                </li>
                {% if 'user' in session %}
                <li class="relative group">
                    <a href="{{ url_for('account') }}">
                        <img alt="Avatar" class="w-10 h-10 rounded-full border border-gray-300 cursor-pointer"
                             src="{{ session['avatar_url'] }}">
                    </a>
                    <ul class="absolute right-0 hidden group-hover:block bg-white border rounded-md shadow-md w-32">
                        <li class="px-4 py-2 hover:bg-gray-100">
                            <a class="text-gray-700" href="{{ url_for('logout') }}">Đăng xuất</a>
                        </li>
                    </ul>
                </li>
                {% else %}
                <li class="hover:bg-gray-200 rounded-md px-3 py-2">
                    <a class="text-gray-700 hover:text-sky-600" href="{{ url_for('login') }}">Đăng nhập</a>
                </li>
                {% endif %}
            </ul>
        </nav>

    </div>
</header>

<script>
    // Hàm lấy danh sách thể loại từ API
    async function fetchCategories() {
        const response = await fetch('/api/categories');
        const categories = await response.json();
        const dropdown = document.getElementById('category-dropdown');
        dropdown.innerHTML = ''; // Xóa nội dung cũ

        if (categories.length === 0) {
            return; // Nếu không có thể loại, không hiển thị gì
        }

        // Thêm từng thể loại vào dropdown
        categories.forEach(category => {
            const item = document.createElement('li');
            item.innerHTML = `<a href="/category/${category.slug}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-sky-600">${category.name}</a>`;
            dropdown.appendChild(item);
        });
    }

    // Gọi hàm khi trang tải
    document.addEventListener('DOMContentLoaded', fetchCategories);

    // Cập nhật danh sách thể loại định kỳ (mỗi 10 giây)
    setInterval(fetchCategories, 10000);
</script>